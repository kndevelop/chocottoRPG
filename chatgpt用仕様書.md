# チョコラン風・超軽量ブラウザRPG 設計書

## 概要
- **タイトル**: Choco-lite RPG Prototype
- **開発技術**:
  - HTML5
  - JavaScript (Phaser3フレームワーク)
- **保存方式**: CookieにJSONをBase64化して保存
- **目的**: チョコットランド風のRPGを簡易に体験できるブラウザプロトタイプ

## システム構成
### フロントエンド
- **Phaser3** による描画・物理処理
- **UI要素**（HTML + CSS）：
  - HUD（ステータス表示）
  - ボタン（セーブ・ニューゲーム・削除・インベントリ）
  - メッセージ表示（トースト・一時メッセージ）
  - インベントリパネル

### データ保存
- Cookieにゲームデータを保存
- 保存フォーマット：JSON → UTF-8 → Base64
- 保存内容：
  ```json
  {
    "version": 1,
    "x": 100,
    "y": 100,
    "hp": 20,
    "hpMax": 20,
    "atk": 3,
    "def": 0,
    "xp": 0,
    "xpMax": 10,
    "level": 1,
    "gold": 0,
    "inventory": []
  }
  ```

## ゲーム仕様
### プレイヤー
- 四角形スプライトで描画
- 移動: WASD
- 攻撃: Space（攻撃判定はプレイヤー前方の当たり判定で処理）
- アイテム拾取: E
- インベントリ表示: I
- ステータス:
  - HP / HPMax
  - ATK / DEF
  - XP / XPMax / Level
  - Gold

### 敵
- 四角形スプライトで描画
- HP: 8
- ATK: 2
- 移動: プレイヤーに近づくと追尾
- 撃破時:
  - Goldまたはアイテムをドロップ
  - XPを付与
  - 一定時間後にリスポーン

### 戦闘
- プレイヤーの攻撃で敵HPを減少
- 敵に触れると接触ダメージ
- ダメージ計算:
  - `ダメージ = max(1, 攻撃力 - 防御力)`

### アイテム
- 種類: 武器（ATK上昇）、防具（DEF上昇）
- ドロップ率: 約35%
- 装備は自動で最良のものを適用
- クリックで破棄可能

### レベルアップ
- XPがXPMaxを超えるとレベルアップ
- 効果:
  - HPMax +4
  - HP全回復
  - ATK +1
  - XPMaxを1.4倍

### 死亡
- HPが0で「気絶」
- ペナルティ: ゴールド半減
- HPを60%回復してリスポーン
- 初期位置に戻る

## UI設計
- HUD:
  - レベル、XP、Gold
  - HPバー
  - ステータス表示
  - 操作説明
- ボタン:
  - 手動セーブ
  - ニューゲーム
  - セーブ削除
  - インベントリ表示
- メッセージ:
  - フッターにゲーム開始時の案内
  - トーストでドロップやセーブ通知
- インベントリ:
  - グリッド表示
  - アイテムをクリックで破棄
- タイルマップによるマップ拡張
  - 複数エリアやダンジョン

